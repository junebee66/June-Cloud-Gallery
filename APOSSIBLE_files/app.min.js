!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";new class{constructor(){setTimeout((()=>{this.initializeLogo()}),600)}initializeIntroText(){const t=document.querySelector(".intro-animation").querySelectorAll("span");let e=0;t.forEach(((t,n)=>{setTimeout((()=>{t.classList.add("visible")}),e),setTimeout((()=>{t.classList.remove("visible")}),e+150),e+=150}))}initializeLogo(){function t(){fetch("https://humantechnology.softgoods.org/sensor-values.json").then((t=>t.text())).then((s=>{var i=JSON.parse(s);i.temperatureValue,i.humidityValue,i.lightValue,i.pressureValue,i.potentiometerValue,i.soundValue;let r=i.buttonArray.reverse(),a=document.querySelectorAll(".interaction .day");for(let t=0;t<a.length;t++){if(a[t].setAttribute("data-value",r[t]),r[t]<3)var c=1;else if(r[t]<6)c=2;else if(r[t]<15)c=3;else c=4;a[t].setAttribute("data-size",c),0!=r[t]&&a[t].classList.add("had-button")}let l=i.movementArray.reverse(),d=document.querySelectorAll(".movement .day");for(let t=0;t<d.length;t++){if(d[t].setAttribute("data-value",l[t]),l[t]<10)c=1;else if(l[t]<100)c=2;else c=3;d[t].setAttribute("data-size",c),0!=l[t]&&d[t].classList.add("had-movement")}var u=new Date(1e3*i.lastUpdate),m=u.toLocaleString("en-US",{timeZone:"America/New_York",day:"2-digit",month:"2-digit",year:"2-digit"});u.toLocaleString("en-US",{timeZone:"America/New_York",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});var h=m.split("/");m=h[0]+"·"+h[1]+"·"+h[2],function(){var e=60;document.querySelector(".next-update");var n=setInterval((function(){--e>=0||(clearInterval(n),t(),o())}),1e3)}(),console.log("Got sensor values"),function(t){let o=function(t){let e;e=t>=15&&t<=25?-.01*Math.pow(t-20,2)+1:t>25&&t<=35?.75*Math.pow((35-t)/10,.8):t>=0&&t<15?.75*Math.pow((t-0)/15,.8):0;return e}(t.temperatureValue),s=function(t){let e;e=t>=1003.25&&t<=1023.25?-1/400*Math.pow(t-1013.25,2)+1:t>1023.25&&t<=1030?.75*Math.pow((1030-t)/6.75,.8):t>=995&&t<1003.25?.75*Math.pow((t-995)/8.25,.8):0;return e}(t.pressureValue),i=function(t){let e;e=t>=40&&t<=60?-1/400*Math.pow(t-50,2)+1:t>60&&t<=80?.75*Math.pow((80-t)/20,.8):t>=20&&t<40?.75*Math.pow((t-20)/20,.8):0;return e}(t.humidityValue),r=function(t){let e;e=t>=40&&t<=100?-1/60*t+5/3:t<40?1:0;return e}(t.soundValue),a=function(t,e){let n,o=new Date(1e3*e),s=o.getUTCHours();n=s>=8&&s<=21?t<=760?t/760:1:t>300?0:1-t/300;return n}(t.lightValue,1688547195),c=function(t){let e=t.reduce(((t,e)=>t+e),0),n=e>=200?1:e/200;n>1&&(n=1);return n}(t.movementArray),l=function(t){let e=t.reduce(((t,e)=>t+e),0),n=e>=200?1:e/200;n>1&&(n=1);return n}(t.buttonArray),d=function(t,e,n,o,s,i,r){let a=(.15*t+.15*e+.15*n+.15*o+.15*s+.15*i+.1*r)/1;return document.querySelector(".browser-mood").textContent="[ Mood "+function(t){if(t<0||t>1)throw new Error("Number must be between 0 and 1");let e=Math.floor(675*t),n=String.fromCharCode(65+e%26),o=String.fromCharCode(65+Math.floor(e/26)),s=Math.floor(9*t);return"".concat(o).concat(n,"-").concat(s)}(a.toFixed(2))+" ]",a}(o,s,i,r,a,c,l),u="Apossible",m=e(d,t.lastUpdate,u.length,u);n(u,m,".logo-type")}(i)})).catch((t=>{console.error("Error getting sensor values:",t)}))}function e(t,e,n,o){let s=[],i=Math.floor(e/60),r=i%o.length,a=(c=i,function(){return(2147483647&(c=0|Math.imul(48271,c)))/2147483648});var c;for(let e=0;e<n;e++){let n=35+85*a()+85*(1-t)*a(),i=Math.max(35,Math.min(120,n));let c=(i-35)/85*-140+530+110;s[(e+r)%o.length]={width:i,weight:c}}return s}function n(t,e,n,o){document.querySelectorAll(n).forEach((n=>{const s=n.classList.contains("logo")?0:40;Array.from({length:t.length},((t,e)=>e)).forEach(((t,i)=>{setTimeout((()=>{let o=n.children[t];o.classList.add("visible-logo-letter"),o.style.fontVariationSettings="'wdth' ".concat(e[t].width,", 'wght' ").concat(e[t].weight-s)}),o?200*i:0),setTimeout((()=>{document.body.classList.add("logo-shown")}),1800)}))}))}function o(){fetch("https://humantechnology.softgoods.org/digital-values.json").then((t=>t.text())).then((t=>{var e=JSON.parse(t);e.scrollTotal,e.visitTotal,e.moveTotal,e.clickTotal,console.log("Got digital values")})).catch((t=>{console.error("Error getting digital values:",t)}))}let s={x:0,y:0};window.addEventListener("scroll",(function(){window.pageYOffset||document.documentElement.scrollTop})),window.addEventListener("click",(function(){})),window.addEventListener("mousemove",(function(t){Math.sqrt(Math.pow(t.clientX-s.x,2)+Math.pow(t.clientY-s.y,2)),s={x:t.clientX,y:t.clientY}})),setTimeout((function(){t(),o()}),5e3),function(){let t="Apossible";n(t,e(.85,document.body.dataset.timestamp,9,t),".logo-type",!0)}()}},new class{constructor(){this.isMobile=window.innerWidth<=768,this.mode="stack",this.viewTransitionTimeout=0,this.panningRAF=null,this.targetPanX=0,this.targetPanY=0,this.currentPanX=0,this.currentPanY=0,this.stackInterval=120,this.closeMenuTimeout=0,this.menuOpenHeight=this.getActualHeight(document.querySelector(".browser-contents-container")),this.initializeInterface()}resetInterface(){document.querySelectorAll(".current-collection .list-fragment").forEach((t=>{t.classList.remove("visible")}));const t=document.querySelector(".current-collection .fragments-inner-container");t.style.width="",t.style.height="",t.style.transform="",t.style.padding="";document.querySelectorAll(".current-collection .fragment").forEach((t=>{t.classList.remove("transition-scatter","transition-scatter-outwards","transition-stack","transition-stack-outwards","transition-index"),t.style.transform="",t.style.left="",t.style.top=""})),document.querySelectorAll(".list-filters").forEach(((t,e)=>{t.querySelectorAll("li").forEach(((t,e)=>{t.classList.remove("visible"),0===e&&t.querySelector("button").classList.add("active-filter")}))})),document.querySelectorAll(".list-fragment").forEach((t=>{t.classList.remove("list-fragment-inactive")})),this.closeFragment(0)}setMode(t){this.mode=t,document.body.classList.remove("view-stack","view-scatter","view-index"),document.body.classList.add("view-"+t)}initializeInterface(){/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&document.body.classList.add("browser-safari"),document.addEventListener("mousemove",this.startPanningMousemove.bind(this)),document.querySelector(".browser-title").addEventListener("click",this.toggleMenu.bind(this)),document.querySelector(".browser-menu-button").addEventListener("click",this.toggleMenu.bind(this)),document.querySelector(".browser-menu-button").addEventListener("mouseenter",this.toggleTitle.bind(this)),document.querySelector(".browser-menu-button").addEventListener("mouseleave",this.toggleTitle.bind(this)),document.querySelector(".browser-title-site").addEventListener("click",this.openHome.bind(this)),document.querySelector(".browser-close").addEventListener("mouseenter",this.toggleTitle.bind(this)),document.querySelector(".browser-close").addEventListener("mouseleave",this.toggleTitle.bind(this)),document.querySelector(".browser-about").addEventListener("mouseenter",this.toggleTitle.bind(this)),document.querySelector(".browser-about").addEventListener("mouseleave",this.toggleTitle.bind(this)),document.querySelector(".page-cover-menu").addEventListener("mouseenter",this.toggleMenu.bind(this)),document.querySelector(".browser-controls-container").addEventListener("mouseenter",(()=>{clearTimeout(this.closeMenuTimeout)})),document.querySelectorAll(".browser-arrow").forEach((t=>{t.addEventListener("mouseenter",this.toggleTitle.bind(this)),t.addEventListener("mouseleave",this.toggleTitle.bind(this))})),document.querySelectorAll(".view-button").forEach((t=>{t.addEventListener("click",(e=>{t.closest(".view-controls-container").classList.remove("state-1","state-2","state-3"),this.updateViewMarker(t);const n=new URL(window.location.href),o=new URLSearchParams(n.search);t.classList.contains("view-button-index")?(this.viewIndex(),t.closest(".view-controls-container").classList.add("state-1"),o.set("view","index")):t.classList.contains("view-button-stack")?(this.viewStack(),t.closest(".view-controls-container").classList.add("state-2"),o.set("view","stack")):t.classList.contains("view-button-scatter")&&(this.viewScatter(),t.closest(".view-controls-container").classList.add("state-3"),o.set("view","scatter")),n.search=o.toString(),this.updateAddressBar(n.href,"",!0)}))})),document.querySelectorAll(".filter-button").forEach((t=>{t.addEventListener("click",(e=>{this.updateViewMarker(t),t.classList.contains("filter-button-i")?this.filterFragments("input"):t.classList.contains("filter-button-io")?this.filterFragments():t.classList.contains("filter-button-o")&&this.filterFragments("output")}))})),this.initializeControlsBrowser(!0),this.initializeFragmentEvents(),this.initializeListEvents(),this.handlePopState(),document.querySelector(".browser-time"),setInterval((function(){let t=new Date,e=t.getTimezoneOffset();t.setMinutes(t.getMinutes()+-240-e),t.toISOString().substr(2,8).replace(/-/g," "),t.toISOString().substr(11,5)}),1e3),document.body.classList.contains("page-open")?document.querySelector(".article-container").addEventListener("click",(t=>{t.target.matches(".article-container")&&this.closePage()})):this.preventInterference();const t=document.body.classList.contains("internal-refer")?0:2e3;setTimeout((()=>{const t=new URLSearchParams(window.location.search).get("view");"index"!==t||this.isMobile?"scatter"!==t||this.isMobile?("stack"!==t||this.isMobile,this.viewStack(!0),this.updateViewMarker(document.querySelector('.view-button[data-view="stack"]'))):(this.viewScatter(),document.body.classList.add("show-controls"),this.updateViewMarker(document.querySelector('.view-button[data-view="scatter"]'))):(this.viewIndex(),document.body.classList.add("show-controls"),this.updateViewMarker(document.querySelector('.view-button[data-view="index"]')));const e=this.isMobile?0:document.querySelectorAll(".current-collection .fragment").length*this.stackInterval+800;setTimeout((()=>{document.body.classList.add("show-controls")}),e)}),t)}updateViewMarker(t){const e=t.closest(".controls-options"),n=t.offsetLeft+t.offsetWidth/2;e.querySelector(".view-marker").style.left="".concat(n,"px")}filterFragments(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;document.body.classList.remove("filter-input","filter-output"),this.isMobile?(document.querySelector(".current-collection").classList.add("filter-mobile-transition"),setTimeout((()=>{document.querySelectorAll(".current-collection .fragment").forEach((t=>{t.classList.remove("visible")}));let e=null;e="input"===t?document.querySelectorAll(".current-collection .fragment.fragment-state-input, .current-collection .fragment-about"):"output"===t?document.querySelectorAll(".current-collection .fragment.fragment-state-output, .current-collection .fragment-about"):document.querySelectorAll(".current-collection .fragment"),this.initializeMobile(e),setTimeout((()=>{document.querySelector(".current-collection").classList.remove("filter-mobile-transition")}),300)}),300)):t&&document.body.classList.add("filter-"+t)}handlePopState(){history.replaceState({page:"initialPage"},"Initial Page",window.location.href),window.addEventListener("popstate",(function(t){t.state&&(window.location.href=window.location.href)})),window.onpageshow=function(t){t.persisted&&window.location.reload()}}updateAddressBar(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Apossible",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"function"==typeof history.pushState&&(n?history.replaceState({},e,t):history.pushState({},e,t+"?view="+this.mode))}getActualHeight(t){const e=t.style.overflow,n=t.style.height;t.style.overflow="visible",t.style.height="auto";const o=t.scrollHeight;return t.style.overflow=e,t.style.height=n,o}toggleMenu(t){clearTimeout(this.closeMenuTimeout);let e=0;e=t&&document.body.classList.contains("menu-open")&&t.target.classList.contains("page-cover-menu")?300:0,this.closeMenuTimeout=setTimeout((()=>{const t=document.body.classList.contains("menu-open")?0:this.menuOpenHeight;document.querySelector(".browser-contents-container").style.height=t+"px",document.body.classList.toggle("menu-open"),document.querySelector(".browser-menu-button").dataset.title=document.body.classList.contains("menu-open")?"Close Menu":"Open Menu",document.querySelector(".browser-title-preview").textContent=document.querySelector(".browser-menu-button").dataset.title}),e)}toggleTitle(t){let e="";t.target.classList.contains("browser-arrow-l")?e="Previous — ":t.target.classList.contains("browser-arrow-r")&&(e="Next — "),document.querySelector(".browser-title-preview").textContent=e+t.target.dataset.title,document.body.classList.toggle("show-title-preview")}openHome(){const t=document.body.dataset.url;window.location.href=t}initializeControlsBrowser(t){const e=document.querySelector(".browser-controls-container"),n=document.querySelector(".view-controls-container"),o=e.querySelector(".browser-title"),s=n.querySelector(".browser-arrow-r"),i=n.querySelector(".browser-arrow-l");let r=null;r=document.body.classList.contains("page-open")?document.querySelector(".article"):document.querySelector(".current-collection"),o.textContent=r.dataset.title,s.dataset.title=r.dataset.nexttitle,i.dataset.title=r.dataset.prevtitle,s.setAttribute("href",r.dataset.nextlink),i.setAttribute("href",r.dataset.prevlink),document.querySelectorAll(".browser-contents-container a").forEach((t=>{t.href===r.dataset.link?t.classList.add("nav-current-page"):t.classList.remove("nav-current-page")})),t&&document.addEventListener("click",(t=>{if(t.target.matches(".browser-arrow")||t.target.matches(".collections-list a")||t.target.matches(".list-more-collections a")){const e=t.target.dataset.title;document.querySelector(".browser-title").textContent=e,this.openCollection(e),t.preventDefault()}if(t.target.matches(".pages-list a")||t.target.matches(".open-about")||t.target.matches(".browser-about")){const e=t.target.getAttribute("href");document.body.classList.contains("page-open")?(this.closePage(),setTimeout((()=>{this.openPage(null,e)}),1e3)):this.openPage(null,e),t.preventDefault()}t.target.matches(".browser-close")&&(document.body.classList.contains("page-open")?this.closePage():this.closeFragment(),t.preventDefault())}))}openCollection(t){if(this.preventInterference(5e3),this.isMobile&&document.body.classList.contains("menu-open")&&(this.toggleMenu(),document.querySelector(".current-collection").classList.add("filter-mobile-transition"),setTimeout((()=>{document.querySelector(".current-collection").classList.remove("filter-mobile-transition")}),300)),document.body.classList.contains("page-open")&&this.closePage(),"stack"===this.mode){const e=document.querySelectorAll(".current-collection .fragment");this.isMobile?(e.forEach(((t,e)=>{t.classList.remove("visible")})),setTimeout((()=>{this.showNewCollection(t)}),300)):(e.forEach(((t,n)=>{this.spreadStackFragments(t,n,e.length,!1,"outwards")})),setTimeout((()=>{this.showNewCollection(t)}),60*e.length+1200))}else if("scatter"===this.mode)this.showNewCollection(t);else if("index"===this.mode){this.showNewCollection(t);document.querySelectorAll(".current-collection .fragment").forEach(((t,e)=>{t.classList.add("visible")}))}}showNewCollection(t){document.querySelectorAll(".current-collection").forEach((t=>{t.classList.remove("current-collection")})),document.querySelectorAll(".collection").forEach((e=>{e.dataset.title.includes(t)&&(e.classList.add("current-collection"),"stack"===this.mode?this.viewStack(!0):"scatter"===this.mode?this.viewScatter(!0):"index"===this.mode&&this.viewIndex(!0))})),this.initializeControlsBrowser(),this.updateAddressBar(document.querySelector(".current-collection").dataset.link,"Apossible")}preventInterference(){document.body.classList.add("prevent-interference")}allowInterference(){document.body.classList.remove("prevent-interference")}initializeFragmentEvents(){let t,e,n=!1,o=null;document.addEventListener("click",(t=>{const e=t.target.closest(".fragment"),n=t.target.closest(".readmore");if(e&&e.closest(".current-collection")&&n){const n=t.target.getAttribute("href");this.openPage(e,n),t.preventDefault()}})),document.addEventListener("mousemove",(s=>{if(!n||!o)return;const i=s.clientX-t,r=s.clientY-e,a=window.getComputedStyle(o),c=new DOMMatrix(a.transform);o.style.transform="matrix(".concat(c.a,", ").concat(c.b,", ").concat(c.c,", ").concat(c.d,", ").concat(c.e+i,", ").concat(c.f+r,")"),t=s.clientX,e=s.clientY})),document.addEventListener("mousedown",(s=>{const i=s.target.closest(".fragment");i&&i.closest(".current-collection")&&"stack"===this.mode&&(n=!0,t=s.clientX,e=s.clientY,o=i,i.classList.remove("transition-stack"))})),document.addEventListener("mouseup",(t=>{n=!1,o=null})),document.addEventListener("mouseover",(t=>{if(1===t.target.nodeType&&"function"==typeof t.target.closest&&!1===this.isMobile){const e=t.target.closest(".fragment");if(e&&e.closest(".current-collection")&&"stack"===this.mode){const t=document.querySelectorAll(".current-collection .fragment");let n=0;t.forEach((t=>{const e=parseInt(t.dataset.zIndex);e>n&&t.classList.contains("visible")&&(n=e)})),parseInt(e.dataset.zIndex)<n&&(e.style.zIndex=n+1,e.dataset.zIndex=n+1)}}}))}prefetch(t){const e=document.createElement("link");e.rel="prefetch",e.href=t,document.head.appendChild(e)}initializeListEvents(){let t=[];document.querySelectorAll(".list-fragment").forEach((e=>{e.addEventListener("mouseover",(n=>{const o=e.querySelector(".list-fragment-type");o.textContent=o.dataset.code;const s=e.closest(".list-column").dataset.column,i=e.closest(".list-container"),r="0"===s?"1":"0",a=i.querySelector('.list-column[data-column="'.concat(r,'"]')),c=Array.from(a.querySelectorAll(".list-fragment")),l=e.querySelector(".list-fragment-dot").getBoundingClientRect(),d=i.querySelector(".list-lines-container"),u=d.getBoundingClientRect(),m=e.dataset.themes.split(",").map((t=>t.trim())),h=c.filter((t=>t.dataset.themes.split(",").map((t=>t.trim())).some((t=>m.includes(t)))));e.classList.add("list-fragment-current"),h.forEach((n=>{const o=n.querySelector(".list-fragment-dot").getBoundingClientRect();n.classList.add("list-fragment-connected");const s=document.createElement("div");s.classList.add("list-line"),n.dataset.id===e.dataset.id&&s.classList.add("same-fragment-line"),s.style.top="".concat((l.top+l.bottom)/2-u.top,"px"),s.style.left="".concat((l.left+l.right)/2-u.left,"px"),s.style.width="".concat(Math.hypot(o.left-l.left,o.top-l.top),"px"),s.style.transform="rotate(".concat(Math.atan2(o.top-l.top,o.left-l.left),"rad)");const i=document.createElement("span");i.classList.add("list-arrow"),i.textContent=Math.random()<.5?"←":"→",s.appendChild(i),d.appendChild(s),t.push(s)}))})),e.addEventListener("mouseleave",(e=>{const n=e.target.querySelector(".list-fragment-type");n.textContent=n.dataset.type,document.querySelectorAll(".list-fragment").forEach((t=>{t.classList.remove("list-fragment-connected","list-fragment-current")})),t.forEach((t=>{t.style.width="0px",t.remove()})),t=[]}))})),document.querySelectorAll(".list-fragment").forEach((t=>{t.addEventListener("click",(e=>{const n=t.dataset.id;if(t.classList.contains("list-fragment-has-article")){const e=t.dataset.url;this.openPage(null,e)}else this.openFragment(n)}))}))}openFragment(t){const e=document.createElement("div");e.classList.add("list-fragment-container"),document.querySelector(".current-collection .fragments-inner-container").querySelectorAll(".fragment").forEach((n=>{if(n.dataset.id===t){const t=n.cloneNode(!0),o=t.querySelector("img")||t.querySelector("video");if(o){this.setImageSize(o,!0);const e=t.querySelector('input[type="checkbox"]');e&&(e.id=e.id+"clone",t.querySelector("label").setAttribute("for",e.id))}e.appendChild(t)}})),document.body.appendChild(e),document.body.classList.add("fragment-open"),e.addEventListener("click",(t=>{t.target.matches(".list-fragment-container")&&this.closeFragment()}))}closeFragment(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;document.body.classList.remove("fragment-open"),document.querySelector(".list-fragment-container")&&setTimeout((()=>{document.querySelector(".list-fragment-container").remove(),this.allowInterference()}),t)}openPage(t,e){this.preventInterference();const n=t?t.dataset.colour:null;fetch(e).then((t=>t.text())).then((t=>{const o=(new DOMParser).parseFromString(t,"text/html").querySelector(".article-container");if(o){const t=o.querySelector("article");t&&n&&(t.style.backgroundColor=n),document.body.appendChild(o),document.body.classList.add("page-open"),o.addEventListener("click",(t=>{t.target.matches(".article-container")&&this.closePage()})),this.initializeControlsBrowser(),this.updateAddressBar(e,"Apossible – "+t.dataset.title)}this.isMobile&&document.body.classList.contains("menu-open")&&this.toggleMenu(),this.allowInterference()})).catch((t=>{console.error("Error fetching or parsing the page:",t),this.allowInterference()}))}closePage(){document.body.classList.remove("page-open"),this.initializeControlsBrowser(),this.updateAddressBar(document.querySelector(".current-collection").dataset.link,"Apossible"),setTimeout((()=>{document.querySelector(".article-container").remove()}),1e3)}viewIndex(){this.setMode("index"),this.resetInterface(),document.querySelectorAll(".list-container").forEach((t=>{t.scrollTop=0})),document.body.classList.add("view-index");const t=document.querySelectorAll(".current-collection .list-column:nth-child(1) article"),e=document.querySelectorAll(".current-collection .list-column:nth-child(2) article");t.forEach(((t,n)=>{setTimeout((()=>{t.classList.add("visible"),this.typeLetters(t.querySelector(".list-fragment-type")),e[n].classList.add("visible"),this.typeLetters(e[n].querySelector(".list-fragment-type"))}),80*n)})),this.allowInterference()}processFilters(){document.querySelectorAll(".list-filters").forEach((t=>{t.querySelectorAll("li").forEach((t=>{const e=t.querySelector("button"),n=t.getAttribute("data-title");if(t.classList.contains("empty-filter"))t.textContent="························";else{let t=n.substring(0,24);for(;t.length<24;)t+="·";e.textContent=t,e.dataset.title=n}}))}))}viewStack(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setMode("stack");let e=document.querySelectorAll(".current-collection .fragment");const n=e.length;let o=0;e.forEach((t=>{let e;t.classList.contains("fragment-pinned")?e=n+100:(e=o,o++),t.style.zIndex=e,t.dataset.zIndex=e;const s=t.querySelector("img")||t.querySelector("video");s&&this.setImageSize(s)}));const s=Array.from(e).sort(((t,e)=>parseInt(t.style.zIndex,10)-parseInt(e.style.zIndex,10))),i=e[0].parentElement;if(s.forEach((t=>{i.appendChild(t)})),e=document.querySelectorAll(".current-collection .fragment"),this.isMobile){let t=1;e.forEach((e=>{const n=6*Math.random()-3;t=1===t?-1:1;const o=100*Math.random()*t,s=50*Math.random()*t;e.querySelector(".fragment-container").style.transform="rotate(".concat(n,"deg) translate(").concat(s,"px, ").concat(o,"px)")})),this.initializeMobile(e),this.allowInterference()}else this.resetInterface(),o=0,e.forEach((n=>{o+=1;const s=4*Math.random()-2;n.style.transform="translate(-50%,-50%) rotate(".concat(s,"deg)"),t||(t=!document.querySelector(".current-collection").classList.contains("fragments-spread")),this.spreadStackFragments(n,o,e.length,t,"inwards")}))}initializeMobile(t){function e(e){let n;n=Array.from(t);const o=n.sort(((t,e)=>parseInt(t.style.zIndex,10)-parseInt(e.style.zIndex,10))),s=o.length;if(o.forEach(((t,e)=>{const n=1-.15*(s-1-e);e===s-1?(t.style.transform="scale(1)",t.classList.add("frontmost-fragment"),t.querySelector(".fragment-container").style.transform="rotate(0deg)"):(t.classList.remove("frontmost-fragment"),t.style.transform="scale(".concat(Math.max(n,0),")"))})),e){const t=o.length,e=t>8?t-8:0,n=160,s=[240,360,500,700];o.forEach(((o,i)=>{let r;r=i<e?0:i>=t-4?s[i+4-t]:(i-e)*n,setTimeout((()=>{o.classList.add("visible")}),r)}))}}t=t||document.querySelectorAll(".current-collection .fragment"),e(!0),t.forEach((function(n){var o=new Hammer(n);o.on("pan",(function(t){let e=t.target;if(t.target.classList.contains("frontmost-fragment")&&(e.classList.add("moving"),0!==t.deltaX&&(0!==t.center.x||0!==t.center.y))){var n=.03*t.deltaX*(t.deltaY/80);e.style.transform="translate("+t.deltaX+"px, "+t.deltaY+"px) rotate("+n+"deg)"}})),o.on("panend",(function(n){let o=n.target;if(n.target.classList.contains("frontmost-fragment")){o.classList.remove("moving");var s=document.body.clientWidth,i=Math.abs(n.deltaX)<65||Math.abs(n.velocityX)<.5;if(o.classList.toggle("removed",!i),i)o.style.transform="";else{var r=Math.max(Math.abs(n.velocityX)*s,s),a=n.deltaX>0?r:-r,c=Math.abs(n.velocityY)*s,l=n.deltaY>0?c:-c,d=.03*n.deltaX*(n.deltaY/80);o.style.transform="translate("+a+"px, "+(l+n.deltaY)+"px) rotate("+d+"deg)",setTimeout((()=>{let n=Number.MAX_VALUE;t.forEach((t=>{const e=parseInt(t.style.zIndex,10);t.style.zIndex=e+10,e<n&&(n=e)})),o.style.transform="",o.style.zIndex=n-1,setTimeout((()=>{o.classList.remove("removed")}),300),e()}),200)}}}))}))}viewScatter(){this.setMode("scatter"),this.resetInterface(),document.querySelector(".current-collection .fragments-container");const t=document.querySelector(".current-collection .fragments-inner-container"),e=document.querySelectorAll(".current-collection .fragment"),n=50;t.style.height=1.5*window.innerHeight+"px",t.style.paddingLeft="50px",t.style.paddingTop="50px",e.forEach((t=>{const e=t.querySelector("img")||t.querySelector("video");e&&this.setImageSize(e),t.style.marginTop="50px",t.style.marginRight="50px",t.style.marginBottom="50px",t.style.marginLeft="50px"})),new Packery(".current-collection .fragments-inner-container",{itemSelector:".fragment",containerStyle:null,transitionDuration:0,horizontal:!0,resize:!1,initLayout:!1}).layout();let o=window.innerWidth,s=window.innerHeight;e.forEach((t=>{const e=t.getBoundingClientRect();o=Math.max(o,e.right)>o?Math.max(o,e.right)+n:o,s=Math.max(s,e.bottom)>s?Math.max(s,e.bottom)+n:s})),t.style.width=o+n+"px",t.style.height=s+n+"px";const i=this.clientX/window.innerWidth,r=this.clientY/window.innerHeight;this.currentPanX=(t.clientWidth-window.innerWidth)*i,this.currentPanY=(t.clientHeight-window.innerHeight)*r,this.targetPanX=this.currentPanX,this.targetPanY=this.currentPanY,t.style.transform="translate(".concat(-this.currentPanX,"px, ").concat(-this.currentPanY,"px)"),setTimeout((()=>{this.stopPanningTicker(),this.panningTicker(t)}),1),e.forEach(((t,n)=>{t.classList.add("visible"),this.spreadScatterFragments(t,n,e.length,"inwards")}))}spreadStackFragments(t,e,n,o,s){let i,r,a,c;"outwards"===s?(i=80,r=91,a=70,c=81):"inwards"===s&&(i=15,r=30,a=5,c=15);const l=2*Math.random()*Math.PI,d=i+Math.random()*(r-i),u=a+Math.random()*(c-a),m=d*Math.cos(l),h=u*Math.sin(l),g="".concat(m,"%"),f="".concat(h,"%"),p=o?.75*window.innerWidth:100,y=p*Math.cos(l),w=p*Math.sin(l);if("outwards"===s||"inwards"===s&&(t.style.marginLeft="calc(".concat(g," + ").concat(y,"px)"),t.style.marginTop="calc(".concat(f," + ").concat(w,"px)")),o)setTimeout((()=>{t.classList.add("transition-stack","visible"),g&&(t.style.marginLeft=g,t.style.marginTop=f),e===n&&setTimeout((()=>{this.allowInterference()}),1e3)}),e*this.stackInterval);else{setTimeout((()=>{t.classList.add("transition-stack"),"outwards"===s&&t.classList.add("transition-stack-outwards"),t.style.marginLeft=g,t.style.marginTop=f}),"outwards"===s?60*e:0)}document.querySelector(".current-collection").classList.add("fragments-spread")}spreadScatterFragments(t,e,n,o){const s=window.innerWidth/2,i=window.innerHeight/2,r=parseFloat(t.style.left),a=parseFloat(t.style.top),c=s-(t.getBoundingClientRect().left+t.offsetWidth/2)<0?-1:1,l=i-(t.getBoundingClientRect().top+t.offsetHeight/2)<0?-1:1;t.style.left=r+20*c+"px",t.style.top=a+20*l+"px",setTimeout((()=>{t.classList.add("transition-scatter"),t.style.left=r+"px",t.style.top=a+"px",e+1===n&&setTimeout((()=>{this.allowInterference()}),200)}),1),document.querySelector(".current-collection").classList.add("fragments-spread")}panningTicker(t){function e(t){return 1-Math.pow(1-t,3)}isNaN(this.currentPanY)&&(this.currentPanY=0),isNaN(this.currentPanX)&&(this.currentPanX=0);const n=this.targetPanX-this.currentPanX,o=this.targetPanY-this.currentPanY;this.currentPanX+=n*e(.02),this.currentPanY+=o*e(.02),"scatter"===this.mode&&(t.style.transform="translate(".concat(-this.currentPanX,"px, ").concat(-this.currentPanY,"px)")),this.panningRAF=requestAnimationFrame((()=>this.panningTicker(t)))}startPanningMousemove(t){this.clientX=t.clientX,this.clientY=t.clientY;const e=document.querySelector(".current-collection .fragments-inner-container"),n=e.clientWidth,o=e.clientHeight,s=this.clientX/window.innerWidth,i=this.clientY/window.innerHeight;this.targetPanX=(n-window.innerWidth)*s,this.targetPanY=(o-window.innerHeight)*i}stopPanningTicker(){cancelAnimationFrame(this.panningRAF)}setImageSize(t,e,n,o){const s=t.closest(".fragment-container"),i=window.innerHeight,r=window.innerWidth;let a,c;"VIDEO"===t.tagName?(a=n||t.videoWidth,c=o||t.videoHeight,t.setAttribute("width",a),t.setAttribute("height",c)):(a=parseInt(t.getAttribute("width")),c=parseInt(t.getAttribute("height")));const l=a/c;if(this.isMobile){const t=window.innerWidth-60;s.style.width="".concat(t,"px"),s.style.height="".concat(t/l,"px")}else if(c>a){const t=.3*i,n=.4*i,o=e?.5*i:t+Math.random()*(n-t),r=o>c?c:o;s.style.height="".concat(r,"px"),s.style.width="".concat(r*l,"px")}else if(c===a){const t=.2*i,n=.3*i,o=e?.5*i:t+Math.random()*(n-t),r=o>c?c:o;s.style.height="".concat(r,"px"),s.style.width="".concat(r,"px")}else{const t=.15*r,n=.25*r,o=e?.4*r:t+Math.random()*(n-t),i=o>a?a:o;s.style.width="".concat(i,"px"),s.style.height="".concat(i/l,"px")}s.dataset.aspectRatio=l}customEaseOut(t){return t+.2*Math.sin(t*Math.PI/2)}hideFragments(t){const e=Array.from(document.querySelectorAll(".current-collection .fragment"));e.sort(((t,e)=>parseInt(window.getComputedStyle(e).zIndex)-parseInt(window.getComputedStyle(t).zIndex)));const n=e.map(((t,n)=>new Promise((o=>{const s=n/(e.length-1);setTimeout((()=>{t.classList.add("invisible"),setTimeout((()=>{t.classList.remove("visible"),t.classList.remove("invisible"),o()}),400)}),400*s)}))));Promise.all(n).then((()=>{t&&"function"==typeof t&&t()}))}typeWords(t,e){t.classList.remove("hide-words");const n=t,o=n.textContent.split(/\s+/);n.innerHTML=o.map((t=>'<span class="split-word">'.concat(t," </span>"))).join("");const s=n.querySelectorAll(".split-word");let i=0;const r=()=>{if(i<s.length){const t=s[i];setTimeout((()=>{t.classList.add("visible-word")}),0),i++,setTimeout(r,60)}else e&&"function"==typeof e&&e()};r()}typeLetters(t,e){t.classList.remove("hide-letters");const n=t,o=n.textContent.split("");n.innerHTML=o.map((t=>'<span class="split-letter">'.concat(t,"</span>"))).join("");const s=n.querySelectorAll(".split-letter");let i=0;const r=()=>{if(i<s.length){const t=s[i];setTimeout((()=>{t.classList.add("visible-letter")}),0),i++,setTimeout(r,30)}else e&&"function"==typeof e&&e()};r()}}}));
//# sourceMappingURL=app.min.js.map